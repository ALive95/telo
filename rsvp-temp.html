<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSVP - Lorenzo & Teresa</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Goudy Old Style', 'Times New Roman', Times, serif;
            line-height: 1.6;
            background: #ffffff;
            color: #000000;
            min-height: 100vh;
            margin-right: 0;
            padding-bottom: 2rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1.25rem;
        }

        .wedding-date {
            font-size: clamp(0.9rem, 2.5vw, 1.6rem);
            font-weight: 400;
            color: #000000;
            text-align: center;
            padding-top: 0.5rem;
            margin-bottom: 1rem;
        }

        .site-title {
            display: block;
            max-width: 400px;
            height: auto;
            margin: 0 auto;
            padding-top: 1.5rem;
            padding-bottom: 0.5rem;
            width: 100%;
        }

        nav { text-align: center; margin-bottom: 1.25rem; }

        nav ul {
            display: flex; justify-content: center; list-style: none; gap: 1rem; flex-wrap: wrap; padding: 0; margin: 0;
        }

        nav a {
            display: inline-block; padding: 0.5rem 1rem; background: #ffffff; color: #000; text-decoration: none; border-radius: 6px; font-weight: 600; transition: all .25s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.08); border: 1px solid rgba(0,0,0,0.08); font-size: clamp(0.95rem, 2.4vw, 1rem);
        }

        nav a:hover { transform: translateY(-1px); background: #000; color: #fff; }

        h2 { font-size: clamp(1.4rem, 4vw, 2rem); font-weight: 400; color: #000; text-align: center; margin: 1.25rem 0; }

        /* Make sections responsive */
        .search-section, .confirmation-section {
            background: #ffffff; padding: 1.5rem; border: 1px solid rgba(0,0,0,0.08); box-shadow: 0 4px 15px rgba(0,0,0,0.06); margin: 1.25rem 0; border-radius: 8px;
        }

        .hidden { display: none; }

        .form-group { margin-bottom: 1rem; }

        label { display: block; font-size: clamp(0.95rem, 2.2vw, 1.1rem); margin-bottom: 0.5rem; font-weight: 600; }

        input[type="text"] {
            width: 100%; padding: 0.75rem; font-size: clamp(0.95rem, 2.2vw, 1rem); font-family: 'Goudy Old Style', 'Times New Roman', Times, serif; border: 1px solid rgba(0,0,0,0.12); border-radius: 6px; box-sizing: border-box;
        }

        button {
            display: inline-block; padding: 0.9rem 1.6rem; background: #000; color: #fff; border: none; cursor: pointer; font-size: clamp(1rem, 3.6vw, 1.15rem); font-family: 'Goudy Old Style', 'Times New Roman', Times, serif; font-weight: 600; transition: all .25s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.12); border-radius: 6px; min-height: 44px;
        }

        button[style] { /* for inline style 'background: #666;' on decline button */ }

        button:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.14); background: #333; }

        .error-message { color: #c00; margin-top: 1rem; font-size: 1rem; }

        .guest-info { background: #f9f9f9; padding: 1rem; border: 1px solid rgba(0,0,0,0.08); margin: 1rem 0; border-radius: 6px; }

        .guest-info p { font-size: 1.05rem; margin-bottom: 0.5rem; }

        .guest-info strong { font-weight: 600; }

        .family-member { display: flex; align-items: center; padding: .75rem; margin: .4rem 0; background: #fff; border: 1px solid rgba(0,0,0,0.06); border-radius: 6px; gap: .75rem; }

        .family-member input[type="checkbox"] { width: 22px; height: 22px; margin: 0; cursor: pointer; flex: 0 0 auto; }

        .family-member input[type="checkbox"]:disabled { cursor: not-allowed; opacity: 0.5; }

        .family-member.disabled { opacity: 0.6; pointer-events: none; }

        .family-member.disabled label { cursor: not-allowed; }

        .family-member label { flex: 1; font-size: 1.05rem; font-weight: 400; cursor: pointer; margin: 0; }

        .member-details { font-size: 0.9rem; color: #666; margin-left: 0.5rem; }

        .button-group { display: flex; gap: 0.75rem; justify-content: center; margin-top: 1.25rem; }

        .success-message { text-align: center; font-size: 1.15rem; color: #0a0; margin-top: 1.25rem; }

        /* Tablet */
        @media (max-width: 768px) {
            .container { padding: 0.9rem; }
            .search-section, .confirmation-section { padding: 1rem; }
            .button-group { flex-direction: column; gap: .6rem; }
            button { width: 100%; }
            .family-member { flex-direction: row; align-items: center; }
            #dietarySection { margin-top: 1rem; }
        }

        /* Small phones */
        @media (max-width: 420px) {
            nav ul { gap: .5rem; }
            .site-title { max-width: 90%; }
            .search-section, .confirmation-section { padding: .75rem; }
            .family-member { padding: .6rem; }
            .member-details { display: block; margin-left: 0; margin-top: .5rem; }
            label { font-size: .98rem; }
            button { font-size: 1rem; padding: .85rem; }
        }
    </style>
</head>
<body>
    <script>
        if (!sessionStorage.getItem('authenticated')) {
            window.location.href = 'login.html';
    }
    </script>
    <div class="container">
        <img src="image_example.png" alt="Lorenzo & Teresa" class="site-title">
        <p class="wedding-date">30 Maggio 2026 - Ravenna</p>

         <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="wedding-day.html">Programma</a></li>
                <li><a href="registry.html">Lista Nozze</a></li>
                <li><a href="rsvp-temp.html">RSVP</a></li>
            </ul>
        </nav>
       
        <h2>RSVP</h2>

        <p style="text-align: center; margin-bottom: 0rem; font-size: 1.3rem; color: #151515;">
            Qui puoi confermare o rifiutare la partecipazione tua e dei tuoi familiari 
            per il ricevimento a Palazzo Manzoni. 
        </p>
        <p style="text-align: center; margin-bottom: 2rem; font-size: 1.3rem; color: #151515;">
            La Messa al mattino è libera e non è richiesto confermare la partecipazione.
        </p>

        <!-- Search Section -->
        <div class="search-section" id="searchSection">
            <div class="form-group">
                <label for="nameInput">Nome e Cognome:</label>
                <input type="text" id="nameInput" placeholder="es. Mario Rossi">
            </div>
            <button onclick="searchGuest()">Cerca</button>
            <p class="error-message hidden" id="errorMessage">Nome non trovato nella lista degli invitati.</p>
        </div>

        <!-- Confirmation Section -->
        <div class="confirmation-section hidden" id="confirmationSection">
            <div class="guest-info" id="guestInfo"></div>
            <div class="button-group">
                <button onclick="confirmAttendance()">Confermo la partecipazione</button>
                <button onclick="declineAttendance()" style="background: #666;">Non potrò partecipare</button>
            </div>
            
            <!-- Dietary Restrictions Section -->
            <div class="hidden" id="dietarySection" style="margin-top: 2rem;">
                <div class="form-group">
                    <label for="dietaryInput">Restrizioni alimentari o allergie (opzionale):</label>
                    <input type="text" id="dietaryInput" placeholder="es. vegetariano, allergia ai crostacei, celiaco">
                </div>
                <button onclick="submitWithDietary()">Invia</button>
            </div>
            
            <p class="success-message hidden" id="successMessage"></p>
        </div>
    </div>

    <script>
        // Guest database - organized by families
        // Each family member can RSVP individually
        let guestDatabase = [
            { name: 'Lorenzo', family: 'Sposi', plusOne: 0 },
            { name: 'Teresa', family: 'Sposi', plusOne: 0 },
            { name: 'Andrea Berardi', family: 'Berardi', plusOne: 0 },
            { name: 'Cecilia Marcucci', family: 'Berardi', plusOne: 0 },
            { name: 'Maria Berardi', family: 'Weaver', plusOne: 0 },
            { name: 'Tommaso Berardi', family: 'Berardi', plusOne: 0 },
            { name: 'Matthew Weaver', family: 'Weaver', plusOne: 0 },
            { name: 'Giorgia Cherubini', family: '1', plusOne: 0 },
            { name: 'Laure', family: '2', plusOne: 0 },
            { name: 'Alfredo Liverani', family: 'Liverani', plusOne: 0 },
            { name: 'Stefania Ciarlantini', family: 'Liverani', plusOne: 0 },
            { name: 'Giovanni Liverani', family: '1', plusOne: 0 },
            { name: 'Elena Liverani', family: 'Liverani', plusOne: 0 },
            { name: 'Gianluca Pezzi', family: 'Pezzi', plusOne: 0 },
            { name: 'Silvia Berardi', family: 'Pezzi', plusOne: 0 },
            { name: 'Matteo Pezzi', family: '2', plusOne: 0 },
            { name: 'Francesco Pezzi', family: 'Pezzi', plusOne: 0 },
            { name: 'Davide Pezzi', family: 'Pezzi', plusOne: 0 },
            { name: 'Cristina Marcucci', family: 'Aronna', plusOne: 0 },
            { name: 'Francesco Aronna', family: 'Aronna', plusOne: 0 },
            { name: 'Carlo Marcucci', family: 'Marcucci', plusOne: 0 },
            { name: 'Alessandra Curti', family: 'Marcucci', plusOne: 0 },
            { name: 'Mauro Berardi', family: '3', plusOne: 0 },
            { name: 'Gianna', family: '4', plusOne: 0 },
            { name: 'Virgilio', family: 'Virgilio', plusOne: 0 },
            { name: 'Fiorella', family: 'Virgilio', plusOne: 0 },
            { name: 'Luigi Ciarlantini', family: 'Ciarlantini', plusOne: 0 },
            { name: 'Laura Storati', family: 'Ciarlantini', plusOne: 0 },
            { name: 'Anna Ciarlantini', family: '5', plusOne: 0 },
            { name: 'Alessandro', family: '5', plusOne: 0 },
            { name: 'Sara Ciarlantini', family: 'Ciarlantini', plusOne: 0 },
            { name: 'Dario Ciarlantini', family: 'Ciarlantini 2', plusOne: 0 },
            { name: 'Heather Cousins', family: 'Ciarlantini 2', plusOne: 0 },
            { name: 'Allegra Ciarlantini', family: 'Ciarlantini 2', plusOne: 0 },
            { name: 'Stella Ciarlantini', family: 'Ciarlantini 2', plusOne: 0 },
            { name: 'Enrico Liverani', family: 'Liverani 2', plusOne: 0 },
            { name: 'Silvia', family: 'Liverani 2', plusOne: 0 },
            { name: 'Francesca Liverani', family: 'Liverani 3', plusOne: 0 },
            { name: 'Ilaria Lando', family: 'Liverani 3', plusOne: 0 },
            { name: 'Lidia Spadoni', family: 'Spadoni', plusOne: 0 },
            { name: 'Maria Giuntoli', family: 'Giuntoli', plusOne: 0 },
            { name: 'Barbara Friolo', family: 'Friolo', plusOne: 0 },
            { name: 'Rosa Friolo', family: '6', plusOne: 0 },
            { name: 'Piero Scarciglia', family: '6', plusOne: 0 },
            { name: 'Ugo Ceroni', family: 'Ceroni', plusOne: 0 },
            { name: 'Antonella Allegra', family: 'Ceroni', plusOne: 0 },
            { name: 'Carlo Bolognesi', family: 'Bolognesi', plusOne: 0 },
            { name: 'Barbara', family: 'Bolognesi', plusOne: 0 },
            { name: 'Carlo Franco Bolognesi', family: 'Bolognesi', plusOne: 0 },
            { name: 'Carlo Bertondini', family: '11', plusOne: 0 },
            { name: 'Sara Pirazzoli', family: '12', plusOne: 0 },
            { name: 'Claudio Rigotti', family: 'Rigotti', plusOne: 0 },
            { name: 'Elisabetta Agostini', family: 'Rigotti', plusOne: 0 },
            { name: 'Anna Rigotti', family: 'Rigotti', plusOne: 0 },
            { name: 'Livia Rigotti', family: 'Rigotti', plusOne: 0 },
            { name: 'Laura Rigotti', family: '7', plusOne: 1 },
            { name: 'Davide Venturi', family: 'Venturi', plusOne: 0 },
            { name: 'Laura Bolognesi', family: 'Venturi', plusOne: 0 },
            { name: 'Giulio Carlo Venturi', family: 'Venturi', plusOne: 0 },
            { name: 'Pierfrancesco Venturi', family: 'Venturi', plusOne: 0 },
            { name: 'Claudio Aurelio Venturi', family: 'Venturi', plusOne: 0 },
            { name: 'Roberto Zanoni', family: 'Zanoni', plusOne: 0 },
            { name: 'Roberta Colombo', family: 'Zanoni', plusOne: 0 },
            { name: 'Don Rosino Gabbiadini', family: 'Gabbiadini', plusOne: 0 },
            { name: 'Licia Piraccini', family: 'Tommasini', plusOne: 0 },
            { name: 'Alberto Tommasini', family: 'Tommasini', plusOne: 0 },
            { name: 'Silvia Lama', family: 'Lama', plusOne: 1 },
            { name: 'Christian Esposito', family: 'Esposito', plusOne: 1 },
            { name: 'Xhenifer Guza', family: 'Belli', plusOne: 0 },
            { name: 'Francesco Belli', family: 'Belli', plusOne: 0 },
            { name: 'Lorenzo Maugeri', family: 'Maugeri', plusOne: 1 },
            { name: 'Davide Barbi', family: '8', plusOne: 0 },
            { name: 'Giulia Mattioli', family: '8', plusOne: 0 },
            { name: 'Gianmarco Bilotti', family: 'Bilotti', plusOne: 0 },
            { name: 'Francesca Asturi', family: 'Bilotti', plusOne: 0 },
            { name: 'Fabio Mercurio', family: 'Mercurio', plusOne: 1 },
            { name: 'Enrico Manuzzi', family: 'Manuzzi', plusOne: 1 },
            { name: 'Gilda Matteucci', family: '9', plusOne: 0 },
            { name: 'Alessandro Capelli', family: '9', plusOne: 0 },
            { name: 'Paolo Trilli', family: 'Trilli', plusOne: 1 },
            { name: 'Giovanni Ardenghi', family: 'Ardenghi', plusOne: 1 },
            { name: 'Chiara Lelli', family: 'Lelli', plusOne: 1 },
            { name: 'Timothée Crin-Barat', family: '10', plusOne: 0 },
            { name: 'Hualin Xiao', family: '10', plusOne: 0 },
            { name: 'Ilias Ftouhi', family: 'Ftouhi', plusOne: 1 },
            { name: 'Dario Domanin', family: 'Domanin', plusOne: 1 }
        ];
        
        let currentGuest = null;
        let familyMembers = [];

        console.log('Guest database loaded:', guestDatabase);

        // Search for guest
        function searchGuest() {
            const input = document.getElementById('nameInput').value.trim();
            const errorMsg = document.getElementById('errorMessage');
            
            console.log('Searching for:', input);
            
            if (!input) {
                errorMsg.textContent = 'Inserisci nome e cognome.';
                errorMsg.classList.remove('hidden');
                return;
            }

            // Normalize input for comparison
            const normalizedInput = input.toLowerCase().replace(/\s+/g, ' ');
            console.log('Normalized input:', normalizedInput);
            
            // Search in database
            currentGuest = guestDatabase.find(guest => {
                const normalizedGuest = guest.name.toLowerCase().replace(/\s+/g, ' ');
                console.log('Comparing with:', normalizedGuest);
                return normalizedGuest === normalizedInput;
            });

            console.log('Found guest:', currentGuest);

            if (currentGuest) {
                // Find all family members
                familyMembers = guestDatabase.filter(guest => 
                    guest.family === currentGuest.family
                );
                console.log('Family members:', familyMembers);
                showConfirmationSection();
            } else {
                errorMsg.textContent = 'Nome non trovato nella lista degli invitati.';
                errorMsg.classList.remove('hidden');
            }
        }

        // Show confirmation section
        function showConfirmationSection() {
            document.getElementById('searchSection').classList.add('hidden');
            document.getElementById('confirmationSection').classList.remove('hidden');
            document.getElementById('errorMessage').classList.add('hidden');

            // Display family info and members
            const guestInfo = document.getElementById('guestInfo');
            // Compute a display family name: hide pure numbers, and strip trailing numeric suffixes (e.g., 'Liverani 2' -> 'Liverani')
            const rawFamily = String(currentGuest.family || '').trim();
            let displayFamily = '';
            if (!/^\d+$/.test(rawFamily) && rawFamily.length > 0) {
                displayFamily = rawFamily.replace(/\s+\d+$/, '');
            }

            let html = '';
            if (displayFamily) {
                html += `<p><strong>Famiglia:</strong> ${displayFamily}</p>`;
            }
            html += `<p style="margin-top: 1.5rem; margin-bottom: 1rem;"><strong>Seleziona i partecipanti:</strong></p>`;
            
            // Create checkbox for each family member
            familyMembers.forEach((member, index) => {
                html += `
                    <div class="family-member">
                        <input type="checkbox" id="member${index}" value="${index}" onchange="togglePlusOneSelector(${index})">
                        <label for="member${index}">
                            ${member.name}
                        </label>
                    </div>
                `;
                
                // Add plusOne selector if member has plusOnes
                if (member.plusOne > 0) {
                    html += `
                        <div id="plusOneSelector${index}" class="family-member" style="display: none; margin-left: 2rem; background: #f0f0f0;">
                            <label style="margin-right: 1rem;">Numero di accompagnatori:</label>
                            <select id="plusOneCount${index}" onchange="renderPlusOneNames(${index})" style="padding: 0.5rem; font-size: 1rem; font-family: 'Goudy Old Style', 'Times New Roman', Times, serif;">
                    `;
                    for (let i = 0; i <= member.plusOne; i++) {
                        html += `<option value="${i}">${i}</option>`;
                    }
                    html += `
                            </select>
                        </div>
                        <div id="plusOneNames${index}" style="display:none; margin-left: 2rem;"></div>
                    `;
                }
            });
            
            guestInfo.innerHTML = html;
        }

        // Toggle plusOne selector visibility (and render names if needed)
        function togglePlusOneSelector(index) {
            const checkbox = document.getElementById(`member${index}`);
            const selector = document.getElementById(`plusOneSelector${index}`);
            const namesContainer = document.getElementById(`plusOneNames${index}`);
            if (selector) {
                selector.style.display = checkbox.checked ? 'flex' : 'none';
            }
            if (!checkbox.checked && namesContainer) {
                namesContainer.style.display = 'none';
                namesContainer.innerHTML = '';
                // reset select to 0
                const plusOneSelect = document.getElementById(`plusOneCount${index}`);
                if (plusOneSelect) plusOneSelect.value = '0';
            } else if (checkbox.checked) {
                // if the select already has a value > 0, render name inputs
                renderPlusOneNames(index);
            }
        }

        // Render input fields to collect plus-one names
        function renderPlusOneNames(index) {
            const countSelect = document.getElementById(`plusOneCount${index}`);
            const namesContainer = document.getElementById(`plusOneNames${index}`);
            if (!countSelect || !namesContainer) return;
            const count = parseInt(countSelect.value);
            if (count > 0) {
                let html = '<div style="margin-top: 0.75rem;">';
                for (let i = 1; i <= count; i++) {
                    html += `
                        <div style="margin-bottom: .5rem;">
                            <label for="plusOneName${index}_${i}" style="display:block; font-weight:600; margin-bottom: .25rem;">Nome accompagnatore ${i}:</label>
                            <input type="text" id="plusOneName${index}_${i}" placeholder="Nome e Cognome" style="padding: .5rem; width: 100%; box-sizing: border-box; font-family: 'Goudy Old Style', 'Times New Roman', Times, serif;">
                        </div>
                    `;
                }
                html += '</div>';
                namesContainer.innerHTML = html;
                namesContainer.style.display = 'block';
            } else {
                namesContainer.style.display = 'none';
                namesContainer.innerHTML = '';
            }
        }

        // Disable all checkboxes
        function disableCheckboxes() {
            familyMembers.forEach((member, index) => {
                const checkbox = document.getElementById(`member${index}`);
                if (checkbox) {
                    checkbox.disabled = true;
                    checkbox.parentElement.classList.add('disabled');
                }

                // Disable plusOne selector if exists
                const plusOneSelect = document.getElementById(`plusOneCount${index}`);
                if (plusOneSelect) {
                    plusOneSelect.disabled = true;
                }

                // Disable plusOne name inputs if they exist
                const namesContainer = document.getElementById(`plusOneNames${index}`);
                if (namesContainer) {
                    const inputs = namesContainer.querySelectorAll('input');
                    inputs.forEach(inp => inp.disabled = true);
                }
            });
            document.querySelector('.button-group').style.display = 'none';
        }

        // Confirm attendance - show dietary section
        function confirmAttendance() {
            const checkedMembers = getCheckedMembers();
            
            if (checkedMembers.length === 0) {
                alert('Seleziona almeno un partecipante.');
                return;
            }
            
            // Hide buttons and show dietary section
            document.querySelector('.button-group').style.display = 'none';
            document.getElementById('dietarySection').classList.remove('hidden');
            disableCheckboxes();
        }

        // Submit with dietary restrictions
        function submitWithDietary() {
            const checkedMembers = getCheckedMembers();
            const dietary = document.getElementById('dietaryInput').value.trim();
            
            sendToGoogleSheets('Conferma', checkedMembers, dietary);
        }

        // Decline attendance
        function declineAttendance() {
            const checkedMembers = getCheckedMembers();
            
            if (checkedMembers.length === 0) {
                alert('Seleziona le persone che non parteciperanno.');
                return;
            }
            
            disableCheckboxes();
            sendToGoogleSheets('Declina', checkedMembers, '');
        }

        // Get checked family members including plusOnes (using entered plus-one names when available)
        function getCheckedMembers() {
            const checked = [];
            familyMembers.forEach((member, index) => {
                const checkbox = document.getElementById(`member${index}`);
                if (checkbox && checkbox.checked) {
                    checked.push(member);

                    // Add plusOnes as separate entries
                    const plusOneSelect = document.getElementById(`plusOneCount${index}`);
                    if (plusOneSelect) {
                        const plusOneCount = parseInt(plusOneSelect.value) || 0;
                        for (let i = 1; i <= plusOneCount; i++) {
                            const nameInput = document.getElementById(`plusOneName${index}_${i}`);
                            const plusOneName = nameInput && nameInput.value.trim() ? nameInput.value.trim() : `${member.name} (accompagnatore ${i})`;
                            checked.push({
                                name: plusOneName,
                                family: member.family,
                                plusOne: 0
                            });
                        }
                    }
                }
            });
            return checked;
        }

        // Send response to Google Sheets
        function sendToGoogleSheets(response, members, dietary) {
            const successMsg = document.getElementById('successMessage');
            
            // Show loading message
            successMsg.textContent = 'Registrando la scelta...';
            successMsg.style.color = '#000';
            successMsg.classList.remove('hidden');
            
            // Hide dietary section
            document.getElementById('dietarySection').classList.add('hidden');
            
            // Replace this URL with your Google Apps Script web app URL
            const scriptURL = 'https://script.google.com/macros/s/AKfycbzsMXGXUO-11YM34EvuFFIT8C3OLYt8HFi2V-0vmODWA8JAoaBMdyGvOEy5P3rIb9rE/exec'
            
            // Send each member's response
            const promises = members.map(member => {
                const data = {
                    name: member.name,
                    family: member.family,
                    plusOne: member.plusOne,
                    response: response,
                    timestamp: new Date().toISOString(),
                    dietary: dietary || ''
                };

                return fetch(scriptURL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
            });

            Promise.all(promises)
                .then(() => {
                    const memberNames = members.map(m => m.name).join(', ');
                    if (response === 'Conferma') {
                        successMsg.textContent = `Grazie! Partecipazione confermata.`;
                    } else {
                        successMsg.textContent = `Grazie per avercelo comunicato.`;
                    }
                    successMsg.style.color = '#0a0';
                    successMsg.classList.remove('hidden');
                    
                    console.log('Responses sent:', members);
                })
                .catch(error => {
                    console.error('Error:', error);
                    successMsg.textContent = 'Errore nell\'invio. Riprova più tardi.';
                    successMsg.style.color = '#c00';
                    successMsg.classList.remove('hidden');
                });
        }
    </script>
</body>
</html>